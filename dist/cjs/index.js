"use strict";var e=require("react"),t=require("styled-components");const r=t.div`
    overflow: clip;
`,n=t.div`
    overflow-y: scroll;
    overflow-x: hidden;
`,l=e.createContext({current:"",scroll:0,scrollHeight:0,height:0,setScrollToSlide:e=>{}}),i={hold:1,slideBy:20,direction:"bottom"},o=e=>("object"!=typeof e?e=i:Object.keys(i).forEach((t=>{e.hasOwnProperty(t)||(e[t]=i[t])})),[e]),s={empty:()=>[{},{}],fadeOut(e,t,r){let n={height:(r=o(r)).hold?`context${r.hold}`:"context1",position:"sticky",top:0},l={width:"100%",position:"absolute"},i=t/5;return"development"===process.env.NODE_ENV&&console.log("y:",e,"yFullView:",t),e>100?(l.zIndex="-9999",l.opacity="0"):e>i&&(l.opacity=""+(100-i-(e-i))/(100-i)),[n,l]},springIn(e,t,r){let n={position:"sticky",transition:`transform ${(r=o(r)).transitionSpeed?r.transitionSpeed:1}s ease,\n                opacity ${r.transitionSpeed?r.transitionSpeed:1}s ease`,top:0,overflow:"hidden",width:"100%"};return e<0-t+t/3?(n.transform="right"===r.direction?"translateX(15%)":"left"===r.direction?"translateX(-15%)":"translateY(15%)",n.opacity="0.1"):n.opacity="1",[{},n]},slideIn(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:0,overflow:"hidden",width:"100%"},l={},i=t;return void 0!==r.hold?l.height="context"+(r.hold+1):l.height="children3",n.transform=e<0?"translateX(-100%)":e>i?"translateX(0%)":r.right?`translateX(${100-(e-0)/(i-0)*100}%)`:`translateX(${(e-0)/(i-0)*100-100}%)`,n.right=r.right?"-50%":"50%",[l,n]},slideOut:(e,t,r)=>[{height:"slideOut"},{position:"slideOut"}],slideMe(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:0,overflow:"hidden",width:"100%"},l={};return r.hold&&(l.height="context"+(r.hold+1)),n.transform=e<t?"translateX(-100%)":e>100?"translateX(0%)":r.right?`translateX(${100-(e-t)/(100-t)*200}%)`:`translateX(${(e-t)/(100-t)*200-100}%)`,n.right=r.right?"-50%":"50%",[l,n]},header(e,t,r){r=o(r);return[{zIndex:11,height:"1px",position:"sticky",top:0},{zIndex:11,width:"100%",position:"absolute"}]}},c={numChildren:1,scrollViewPort:!1,scrollSpeed:1},a=(e,t,r,n,l)=>{let i=(100-t-(l?0:t))/n;return[i,e<0?-1:e>r&&!l?n+1:Math.floor(e/i),e<0||e>r&&!l?0:(e-t)%i/i*100]},d=e=>e.scrollViewPort?`context${e.scrollSpeed}`:`children${e.scrollSpeed}`,h=(e,t,r)=>{let n=100-t>t?100-t:t;return void 0!==r&&r.numChildren||(console.error("ERROR: ","Children Style Method didn't receive numChildren."),r=c),Object.keys(c).forEach((e=>{r.hasOwnProperty(e)||(r[e]=c[e])})),[n,r]},u=(e,t,r)=>{let n={};return r.background&&(n.backgroundImage=`url(${r.background})`,n.backgroundPosition="center",n.backgroundSize="contain",n.backgroundRepeat="no-repeat"),r.fullScreen&&(n.height="100vh",n.width="100%"),n},p={empty:()=>[{},{},[]],transition(e,t,r){let[n,l]=h(0,t,r),[i,o,s]=a(e,t,n,l.numChildren,l.toEnd),c=new Array(l.numChildren).fill({}).map(((e,t)=>{let r={top:0,position:"absolute",opacity:"0",transition:`opacity ${l.transitionSpeed?l.transitionSpeed:1}s`};return t===o&&(r.opacity="1"),r})),p=u(0,0,l);return[{height:d(l),position:"relative"},Object.assign(Object.assign({},p),{position:"sticky",overflow:"visible",top:0}),c]},alternateSlideIn(e,t,r){let[n,l]=h(0,t,r),[i,o,s]=a(e,t,n,l.numChildren,l.toEnd),c=new Array(l.numChildren).fill({}).map(((r,n)=>{let i={top:0,transition:e<0-t?"":`transform ${l.transitionSpeed?l.transitionSpeed:1}s`};return n>o&&(i.transform="translate3d(-100%,0,0)"),l.staticFirstChild&&0===n&&(delete i.transform,delete i.transition),i})),p=u(0,0,l);return[{height:d(l),overflow:"visible",display:"block",position:"relative"},Object.assign(Object.assign({},p),{WebkitPosition:"sticky",position:"sticky",overflow:"visible",top:0}),c]},revealSlideIn(e,t,r){let[n,l]=h(0,t,r);return[{height:"context1",position:"relative"},{position:"sticky",overflow:"visible",top:0},new Array(l.numChildren).fill({}).map(((t,r)=>{let n={transform:"translateX(-100%)"};return e>=0&&(n.transition=`transform ${1+r/10}s`,n.transform="translateX(-100%)"),n}))]}};const f=t=>{var r,n;if((null===(n=null===(r=t.props)||void 0===r?void 0:r.style)||void 0===n?void 0:n.position)&&"sticky"===t.props.style.position){let r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]])}return r}(t.props.style,["position"]),n=t.props.className?"sticky "+t.props.className:"sticky";return e.cloneElement(t,{style:r,className:n})}return t};exports.ConfigurableSlide=t=>{const r=e.useRef(null),n=e.useRef(null),[i,o]=e.useState(0),[c,a]=e.useState(0),d=e.useContext(l),[h,u]=e.useState({}),[g,y]=e.useState({}),[m,v]=e.useState([]),S=e=>{let t=(e=>{let t=0;if(e.current)for(let r=0;r<e.current.children.length;r++)t+=e.current.children.item(r).clientHeight;return t})(r);if(!e)return"auto";let[n,l]=e.split(/(context|children)(\d)$/).filter(Boolean);return["context","children"].includes(n)?"context"===n?d.height?d.height*parseInt(l)+"px":"100%":r.current?t*parseInt(l)+"px":"100%":e};return e.useEffect((()=>{n.current&&void 0!==t.startScroll&&(d.scroll,n.current.offsetTop,d.height,void 0!==t.startScroll?o((d.scroll-t.startScroll)/n.current.scrollHeight*100):o(0),a(d.height<=n.current.scrollHeight?d.height/n.current.scrollHeight*100:0))}),[d.scroll,d.height]),e.useEffect((()=>{let[e,r]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(s).includes(e))),r=s.empty();return t.length>0&&(r=t.map((t=>s[t](i,c,e[t]))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(t);e.height=S(e.height);let[n,l,o]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(p).includes(e))),r=p.empty(),n=e.children&&Array.isArray(e.children)?e.children.length:1;return t.length>0&&(r=t.map((t=>p[t](i,c,Object.assign({numChildren:n},e[t])))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(t);n.height&&(n.height=S(n.height)),u(Object.assign(e,n)),y(Object.assign(r,l)),v(o)}),[i,c]),e.createElement("div",{ref:n,style:h},f(e.createElement("div",{ref:r,style:g},t.header&&e.createElement("div",{style:{position:"sticky",top:0,border:0,padding:0,margin:0}},t.header),e.Children.map(t.children,((t,r)=>{let n=r<m.length?m[r]:{};return e.createElement("div",{style:n},void 0!==t?e.cloneElement(t):void 0)})))))},exports.HelloWorld=t=>{const r=e.useRef(null),n=e.useContext(l),[i,o]=e.useState(0);return window.addEventListener("scroll",(e=>{})),e.useEffect((()=>{r&&r.current&&o(r.current.scrollTop)}),[]),e.createElement("div",{style:{height:t.small?"100px":"100vh",display:"flex",flexDirection:"column",justifyContent:"center"}},e.createElement("p",null,t.title?t.title:n.current?n.current:"unknown title"),e.createElement("p",{ref:r,style:{textAlign:"center",fontSize:t.small?"1em":"5vw",margin:"auto"}},t.children?t.children:"Hello World, react-scroll-presentation"))},exports.Presentation=t=>{const[i,o]=e.useState(0),[s,c]=e.useState(0),a=e.useRef(new Array),d=e.useRef(),h=e.useRef(),[u,p]=e.useState(-1),[f,g]=e.useState(!1),[y,m]=e.useState([]),[v,S]=e.useState([]),[b,w]=e.useState(""),E=(e,r)=>{e=e<0?0:e>=v.length?v.length-1:e;let n={left:0,top:v[e],behavior:"auto"};t.fullScreen?window.scrollTo(0,v[e]):h.current.scrollTo(n)},k=(e,r)=>{var n;if("number"==typeof e)e<0||e>=v.length?console.error("setScrollToSlide received slide out of bounds",0):E(e);else{let r=0;for(;r<t.children.length&&(!(null===(n=t.children[r].props)||void 0===n?void 0:n.title)||t.children[r].props.title!==e);r++);r===t.children.length?console.error("setScrollToSlide received unknown title"):E(r)}};return e.useEffect((()=>{var e;for(let t=0;t<v.length;t++)u>=v[t]&&(t===v.length-1||u<v[t+1])&&w((null===(e=y[t].props)||void 0===e?void 0:e.title)?y[t].props.title:t);if(t.fullScreen){const e=e=>{p(window.scrollY),g(window.scrollY!==u)};return document.addEventListener("scroll",e),()=>document.removeEventListener("scroll",e)}if(d.current){const e=e=>{p(h.current.scrollTop),g(h.current.scrollY!==u)};return h.current.addEventListener("scroll",e),()=>h.current.addEventListener("scroll",e)}}),[u]),e.useEffect((()=>{if(Array.isArray(t.children))m(t.children.map(((t,r)=>e.cloneElement(t,{startScroll:v[r],endScroll:v[r+1],ref:a.current[r]}))));else if(t.children){let r=[e.cloneElement(t.children,{startScroll:0,ref:a.current[0]})];m(r)}}),[t,v]),e.useEffect((()=>{}),[a]),e.useEffect((()=>{var e;let t=[0];if(null===(e=d.current)||void 0===e?void 0:e.children.length){let e=0;for(let r=0;r<d.current.children.length;r++){let n=d.current.children.item(r).scrollHeight;e+=n,r<d.current.children.length-1&&(t[r+1]=0===r?n:t[r]+n)}o(e),S((e=>e.length===t.length&&e.every(((e,r)=>e===t[r]))?e:t))}}),[y,u]),e.useEffect((()=>{let r=require("../../package.json");console.log("DEVELOPMENT: ","react-scroll-presentation",r.version),console.log(d.current.children),console.log(t.children,e.isValidElement(t.children[0]));let n=document.createElement("style");n.innerText="    \n     .sticky {\n        display: block;\n        position: -webkit-sticky;\n        position: -moz-sticky;\n        position: -o-sticky;\n        position: -ms-sticky;\n        position: sticky;\n     }",document.head.appendChild(n),c(window.innerHeight)}),[]),t.fullScreen?e.createElement(r,{fullScreen:!0,ref:d},e.createElement(l.Provider,{value:{scroll:u,setScrollToSlide:e=>k(e),current:b,scrollHeight:i-s,height:s}},y)):e.createElement(n,{ref:h,className:t.className?t.className:""},e.createElement(r,{style:{height:i},ref:d},e.createElement(l.Provider,{value:{scroll:u,setScrollToSlide:e=>k(e),current:b,scrollHeight:i-h.current?h.current.clientHeight:0,height:h.current?h.current.clientHeight:0}},y)))},exports.PresentationContext=l;
//# sourceMappingURL=index.js.map
