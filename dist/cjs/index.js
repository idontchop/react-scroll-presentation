"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("styled-components");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=r(e);const n=r(t).default.div`
    contain: paint;
`,i=l.default.createContext({scroll:0,height:0}),o={empty:()=>[{},{}],slideIn(e,t,r){void 0===r&&(r={});let l={position:"sticky",top:"0",overflow:"hidden",width:"100%"},n={},i=2*t;return r.hold?n.height="context"+(r.hold+1):n.height="children3",l.transform=e<t?"translateX(-100%)":e>i?"translateX(0%)":r.right?`translateX(${100-(e-t)/(i-t)*100}%)`:`translateX(${(e-t)/(i-t)*100-100}%)`,l.right=r.right?"-50%":"50%",[n,l]},slideOut:(e,t,r)=>[{height:"slideOut"},{position:"slideOut"}],slideMe(e,t,r){void 0===r&&(r={});let l={position:"sticky",top:"0",overflow:"hidden",width:"100%"},n={};return r.hold&&(n.height="context"+(r.hold+1)),l.transform=e<t?"translateX(-100%)":e>100?"translateX(0%)":r.right?`translateX(${100-(e-t)/(100-t)*200}%)`:`translateX(${(e-t)/(100-t)*200-100}%)`,l.right=r.right?"-50%":"50%",[n,l]}},s={numChildren:1,scrollSpeed:1},c={empty:()=>[{},{},[]],transition(e,t,r){let l=100-t>t?100-t:t;if(void 0===r||!r.numChildren)return[{},{},[]];Object.keys(s).forEach((e=>{r.hasOwnProperty(e)||(r[e]=s[e])}));let[n,i,o]=((e,t,r,l,n)=>{let i=(100-t-(n?0:t))/l;return[i,e<t?-1:e>r&&!n?l+1:Math.floor((e-t)/i),e<t||e>r&&!n?0:(e-t)%i/i*100]})(e,t,l,r.numChildren,r.toEnd),c=new Array(r.numChildren).fill({}).map(((e,t)=>{let l={top:0,position:"absolute",opacity:"0",transition:`opacity ${r.transitionSpeed?r.transitionSpeed:1}s`};return t===i&&(l.opacity="1"),l}));return[{height:r.scrollViewPort?`context${r.scrollSpeed}`:`children${r.scrollSpeed}`,border:"1px yellow solid",position:"relative"},{position:"sticky",overflow:"visible",top:0,border:"1px red solid"},c]}};exports.ConfigurableSlide=t=>{const r=e.useRef(null),n=e.useRef(null),[s,u]=e.useState(0),[a,d]=e.useState(0),h=l.default.useContext(i),[f,g]=e.useState({}),[p,m]=e.useState({}),[y,v]=e.useState([]),E=e=>{if(!e)return"100%";let[t,l]=e.split(/(context|children)(\d)$/).filter(Boolean),n=(e=>{let t=0;if(e.current)for(let r=0;r<e.current.children.length;r++)t+=e.current.children.item(r).clientHeight;return t})(r);return"context"===t?h.height?h.height*parseInt(l)+"px":"100%":r.current?n*parseInt(l)+"px":"100%"};return e.useEffect((()=>{if(n.current&&n.current&&h.scroll>=n.current.offsetTop-h.height&&h.scroll<=n.current.offsetTop+n.current.clientHeight){let e=h.scroll-(n.current.offsetTop-h.height);u(e/(n.current.clientHeight+h.height)*100),d(h.height<n.current.clientHeight?h.height/n.current.clientHeight*100:0)}}),[h.scroll,h.height]),e.useEffect((()=>{let[e,r]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(o).includes(e))),r=o.empty();return t.length>0&&(r=t.map((t=>o[t](s,a,e[t]))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(t);e.height=e.height?E(e.height):"100%";let[l,n,i]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(c).includes(e))),r=c.empty(),l=e.children&&Array.isArray(e.children)?e.children.length:1;return t.length>0&&(r=t.map((t=>c[t](s,a,Object.assign({numChildren:l},e[t])))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(t);l.height&&(l.height=E(l.height)),g(Object.assign(e,l)),m(Object.assign(r,n)),v(i)}),[s,a]),l.default.createElement("div",{ref:n,style:f},l.default.createElement("div",{ref:r,style:p},l.default.Children.map(t.children,((e,t)=>{let r=t<y.length?y[t]:{};return l.default.createElement("div",{style:r},void 0!==e?l.default.cloneElement(e):void 0)}))))},exports.HelloWorld=t=>{const r=e.useRef(null),[n,i]=e.useState(0);return window.addEventListener("scroll",(e=>{})),e.useEffect((()=>{r&&r.current&&i(r.current.scrollTop)}),[]),l.default.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center"}},l.default.createElement("p",null,t.title),l.default.createElement("p",{ref:r,style:{textAlign:"center",fontSize:"5em",margin:"auto"}},t.children?t.children:"Hello World, react-scroll-presentation"))},exports.Presentation=t=>{const[r,o]=e.useState(0),s=e.useRef(new Array),c=e.useRef();e.useRef();const[u,a]=e.useState(0),[d,h]=e.useState(!1),[f,g]=e.useState([]),[p,m]=e.useState([]);return e.useEffect((()=>{const e=e=>{a(window.scrollY),h(window.scrollY>u)};return document.addEventListener("scroll",e),()=>document.removeEventListener("scroll",e)}),[u]),e.useEffect((()=>{if(console.log(t.children),Array.isArray(t.children))g(t.children.map(((e,t)=>l.default.cloneElement(e,{scroll:u,ref:s.current[t]}))));else if(t.children){let e=[l.default.cloneElement(t.children,{scroll:u,ref:s.current[0]})];g(e)}}),[t]),e.useEffect((()=>{}),[s]),e.useEffect((()=>{var e;let t=[];if(console.log(c),null===(e=c.current)||void 0===e?void 0:e.children.length){let e=0;for(let r=0;r<c.current.children.length;r++){let l=c.current.children.item(r).clientHeight;e+=l,t[r]=0===r?0:t[r-1]+l}o(e),m(t)}}),[f]),l.default.createElement(n,{ref:c},l.default.createElement(i.Provider,{value:{scroll:u,height:window.innerHeight}},f))};
