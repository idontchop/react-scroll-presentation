"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("styled-components");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,l,i=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){c=!0,l=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw l}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o,c,u,s=r(t).default.div(o||(c=["\n    contain: paint;\n  \n"],u||(u=c.slice(0)),o=Object.freeze(Object.defineProperties(c,{raw:{value:Object.freeze(u)}})))),a=n.default.createContext({scroll:0,height:0});const h={empty:()=>[{},{}],slideIn(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:"0",overflow:"hidden",width:"100%"},l={},i=2*t;return r.hold?l.height="context"+(r.hold+1):l.height="children3",n.transform=e<t?"translateX(-100%)":e>i?"translateX(0%)":r.right?`translateX(${100-(e-t)/(i-t)*100}%)`:`translateX(${(e-t)/(i-t)*100-100}%)`,n.right=r.right?"-50%":"50%",[l,n]},slideOut:(e,t,r)=>[{height:"slideOut"},{position:"slideOut"}],slideMe(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:"0",overflow:"hidden",width:"100%"},l={};return r.hold&&(l.height="context"+(r.hold+1)),n.transform=e<t?"translateX(-100%)":e>100?"translateX(0%)":r.right?`translateX(${100-(e-t)/(100-t)*200}%)`:`translateX(${(e-t)/(100-t)*200-100}%)`,n.right=r.right?"-50%":"50%",[l,n]}},d={numChildren:1,scrollSpeed:1},f={empty:()=>[{},{},[]],transition(e,t,r){let n=100-t>t?100-t:t;if(void 0===r||!r.numChildren)return[{},{},[]];Object.keys(d).forEach((e=>{r.hasOwnProperty(e)||(r[e]=d[e])}));let[l,i,o]=((e,t,r,n,l)=>{let i=(100-t-(l?0:t))/n;return[i,e<t?-1:e>r&&!l?n+1:Math.floor((e-t)/i),e<t||e>r&&!l?0:(e-t)%i/i*100]})(e,t,n,r.numChildren,r.toEnd),c=new Array(r.numChildren).fill({}).map(((e,t)=>{let n={top:0,position:"absolute",opacity:"0",transition:`opacity ${r.transitionSpeed?r.transitionSpeed:1}s`};return t===i&&(n.opacity="1"),n}));return[{height:r.scrollViewPort?`context${r.scrollSpeed}`:`children${r.scrollSpeed}`,border:"1px yellow solid",position:"relative"},{position:"sticky",overflow:"visible",top:0,border:"1px red solid"},c]}};exports.ConfigurableSlide=t=>{const r=e.useRef(null),l=e.useRef(null),[i,o]=e.useState(0),[c,u]=e.useState(0),s=n.default.useContext(a),[d,p]=e.useState({}),[g,y]=e.useState({}),[m,v]=e.useState([]),b=e=>{if(!e)return"100%";let[t,n]=e.split(/(context|children)(\d)$/).filter(Boolean),l=(e=>{let t=0;if(e.current)for(let r=0;r<e.current.children.length;r++)t+=e.current.children.item(r).clientHeight;return t})(r);return"context"===t?s.height?s.height*parseInt(n)+"px":"100%":r.current?l*parseInt(n)+"px":"100%"};return e.useEffect((()=>{if(l.current&&l.current&&s.scroll>=l.current.offsetTop-s.height&&s.scroll<=l.current.offsetTop+l.current.clientHeight){let e=s.scroll-(l.current.offsetTop-s.height);o(e/(l.current.clientHeight+s.height)*100),u(s.height<l.current.clientHeight?s.height/l.current.clientHeight*100:0)}}),[s.scroll,s.height]),e.useEffect((()=>{let[e,r]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(h).includes(e))),r=h.empty();return t.length>0&&(r=t.map((t=>h[t](i,c,e[t]))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(t);e.height=e.height?b(e.height):"100%";let[n,l,o]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(f).includes(e))),r=f.empty(),n=e.children&&Array.isArray(e.children)?e.children.length:1;return t.length>0&&(r=t.map((t=>f[t](i,c,Object.assign({numChildren:n},e[t])))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(t);n.height&&(n.height=b(n.height)),p(Object.assign(e,n)),y(Object.assign(r,l)),v(o)}),[i,c]),n.default.createElement("div",{ref:l,style:d},n.default.createElement("div",{ref:r,style:g},n.default.Children.map(t.children,((e,t)=>{let r=t<m.length?m[t]:{};return n.default.createElement("div",{style:r},void 0!==e?n.default.cloneElement(e):void 0)}))))},exports.HelloWorld=t=>{const r=e.useRef(null),[l,i]=e.useState(0);return window.addEventListener("scroll",(e=>{})),e.useEffect((()=>{r&&r.current&&i(r.current.scrollTop)}),[]),n.default.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center"}},n.default.createElement("p",null,t.title),n.default.createElement("p",{ref:r,style:{textAlign:"center",fontSize:"5em",margin:"auto"}},t.children?t.children:"Hello World, react-scroll-presentation"))},exports.Presentation=function(t){var r=l(e.useState(0),2),i=r[0],o=r[1],c=e.useRef(new Array),u=e.useRef();e.useRef();var h=l(e.useState(0),2),d=h[0],f=h[1],p=l(e.useState(!1),2);p[0];var g=p[1],y=l(e.useState([]),2),m=y[0],v=y[1],b=l(e.useState([]),2);b[0];var w=b[1];return e.useEffect((function(){var e=function(e){f(window.scrollY),g(window.scrollY>d)};return document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}}),[d]),e.useEffect((function(){Array.isArray(t.children)&&v(t.children.map((function(e,t){return n.default.cloneElement(e,{scroll:d,ref:c.current[t]})})))}),[t]),e.useEffect((function(){}),[c]),e.useEffect((function(){var e,t=[];if(null!==(e=u.current)&&void 0!==e&&e.children.length){for(var r=0,n=0;n<u.current.children.length;n++){var l=u.current.children.item(n).clientHeight;r+=l,t[n]=0===n?0:t[n-1]+l}o(r),w(t)}}),[m]),n.default.createElement(s,{ref:u,scrollheight:i},n.default.createElement(a.Provider,{value:{scroll:d,height:window.innerHeight}},m))};
