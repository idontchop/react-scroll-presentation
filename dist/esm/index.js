import e,{useRef as t,useState as r,useEffect as n}from"react";import i from"styled-components";const l=i=>{const l=t(null),[o,c]=r(0);return window.addEventListener("scroll",(e=>{})),n((()=>{l&&l.current&&c(l.current.scrollTop)}),[]),e.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center"}},e.createElement("p",null,i.title),e.createElement("p",{ref:l,style:{textAlign:"center",fontSize:"5em",margin:"auto"}},i.children?i.children:"Hello World, react-scroll-presentation"))};function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,l=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(c)throw i}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s,a,h,u=i.div(s||(a=["\n    contain: paint;\n  \n"],h||(h=a.slice(0)),s=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(h)}})))),d=e.createContext({scroll:0,height:0}),f=function(i){var l=o(r(0),2),c=l[0],s=l[1],a=t(new Array),h=t();t();var f=o(r(0),2),g=f[0],p=f[1],m=o(r(!1),2);m[0];var y=m[1],v=o(r([]),2),b=v[0],w=v[1],O=o(r([]),2);O[0];var j=O[1];return n((function(){var e=function(e){p(window.scrollY),y(window.scrollY>g)};return document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}}),[g]),n((function(){Array.isArray(i.children)&&w(i.children.map((function(t,r){return e.cloneElement(t,{scroll:g,ref:a.current[r]})})))}),[i]),n((function(){}),[a]),n((function(){var e,t=[];if(null!==(e=h.current)&&void 0!==e&&e.children.length){for(var r=0,n=0;n<h.current.children.length;n++){var i=h.current.children.item(n).clientHeight;r+=i,t[n]=0===n?0:t[n-1]+i}s(r),j(t)}}),[b]),e.createElement(u,{ref:h,scrollheight:c},e.createElement(d.Provider,{value:{scroll:g,height:window.innerHeight}},b))};const g={empty:()=>[{},{}],slideIn(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:"0",overflow:"hidden",width:"100%"},i={},l=2*t;return r.hold?i.height="context"+(r.hold+1):i.height="children3",n.transform=e<t?"translateX(-100%)":e>l?"translateX(0%)":r.right?`translateX(${100-(e-t)/(l-t)*100}%)`:`translateX(${(e-t)/(l-t)*100-100}%)`,n.right=r.right?"-50%":"50%",[i,n]},slideOut:(e,t,r)=>[{height:"slideOut"},{position:"slideOut"}],slideMe(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:"0",overflow:"hidden",width:"100%"},i={};return r.hold&&(i.height="context"+(r.hold+1)),n.transform=e<t?"translateX(-100%)":e>100?"translateX(0%)":r.right?`translateX(${100-(e-t)/(100-t)*200}%)`:`translateX(${(e-t)/(100-t)*200-100}%)`,n.right=r.right?"-50%":"50%",[i,n]}},p={numChildren:1,scrollSpeed:1},m={empty:()=>[{},{},[]],transition(e,t,r){let n=100-t>t?100-t:t;if(void 0===r||!r.numChildren)return[{},{},[]];Object.keys(p).forEach((e=>{r.hasOwnProperty(e)||(r[e]=p[e])}));let[i,l,o]=((e,t,r,n,i)=>{let l=(100-t-(i?0:t))/n;return[l,e<t?-1:e>r&&!i?n+1:Math.floor((e-t)/l),e<t||e>r&&!i?0:(e-t)%l/l*100]})(e,t,n,r.numChildren,r.toEnd),c=new Array(r.numChildren).fill({}).map(((e,t)=>{let n={top:0,position:"absolute",opacity:"0",transition:`opacity ${r.transitionSpeed?r.transitionSpeed:1}s`};return t===l&&(n.opacity="1"),n}));return[{height:r.scrollViewPort?`context${r.scrollSpeed}`:`children${r.scrollSpeed}`,border:"1px yellow solid",position:"relative"},{position:"sticky",overflow:"visible",top:0,border:"1px red solid"},c]}},y=i=>{const l=t(null),o=t(null),[c,s]=r(0),[a,h]=r(0),u=e.useContext(d),[f,p]=r({}),[y,v]=r({}),[b,w]=r([]),O=e=>{if(!e)return"100%";let[t,r]=e.split(/(context|children)(\d)$/).filter(Boolean),n=(e=>{let t=0;if(e.current)for(let r=0;r<e.current.children.length;r++)t+=e.current.children.item(r).clientHeight;return t})(l);return"context"===t?u.height?u.height*parseInt(r)+"px":"100%":l.current?n*parseInt(r)+"px":"100%"};return n((()=>{if(o.current&&o.current&&u.scroll>=o.current.offsetTop-u.height&&u.scroll<=o.current.offsetTop+o.current.clientHeight){let e=u.scroll-(o.current.offsetTop-u.height);s(e/(o.current.clientHeight+u.height)*100),h(u.height<o.current.clientHeight?u.height/o.current.clientHeight*100:0)}}),[u.scroll,u.height]),n((()=>{let[e,t]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(g).includes(e))),r=g.empty();return t.length>0&&(r=t.map((t=>g[t](c,a,e[t]))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(i);e.height=e.height?O(e.height):"100%";let[r,n,l]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(m).includes(e))),r=m.empty(),n=e.children&&Array.isArray(e.children)?e.children.length:1;return t.length>0&&(r=t.map((t=>m[t](c,a,Object.assign({numChildren:n},e[t])))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(i);r.height&&(r.height=O(r.height)),p(Object.assign(e,r)),v(Object.assign(t,n)),w(l)}),[c,a]),e.createElement("div",{ref:o,style:f},e.createElement("div",{ref:l,style:y},e.Children.map(i.children,((t,r)=>{let n=r<b.length?b[r]:{};return e.createElement("div",{style:n},void 0!==t?e.cloneElement(t):void 0)}))))};export{y as ConfigurableSlide,l as HelloWorld,f as Presentation};
//# sourceMappingURL=index.js.map
