import e,{useRef as t,useState as r,useEffect as n}from"react";import l from"styled-components";const i=l=>{const i=t(null),[o,c]=r(0);return window.addEventListener("scroll",(e=>{})),n((()=>{i&&i.current&&c(i.current.scrollTop)}),[]),e.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center"}},e.createElement("p",null,l.title),e.createElement("p",{ref:i,style:{textAlign:"center",fontSize:"5em",margin:"auto"}},l.children?l.children:"Hello World, react-scroll-presentation"))},o=l.div`
    contain: paint;
`,c=e.createContext({scroll:0,height:0}),s=l=>{const[i,s]=r(0),h=t(new Array),d=t();t();const[a,u]=r(0),[g,p]=r(!1),[m,f]=r([]),[y,v]=r([]);return n((()=>{const e=e=>{u(window.scrollY),p(window.scrollY>a)};return document.addEventListener("scroll",e),()=>document.removeEventListener("scroll",e)}),[a]),n((()=>{if(console.log(l.children),Array.isArray(l.children))f(l.children.map(((t,r)=>e.cloneElement(t,{scroll:a,ref:h.current[r]}))));else if(l.children){let t=[e.cloneElement(l.children,{scroll:a,ref:h.current[0]})];f(t)}}),[l]),n((()=>{}),[h]),n((()=>{var e;let t=[];if(console.log(d),null===(e=d.current)||void 0===e?void 0:e.children.length){let e=0;for(let r=0;r<d.current.children.length;r++){let n=d.current.children.item(r).clientHeight;e+=n,t[r]=0===r?0:t[r-1]+n}s(e),v(t)}}),[m]),e.createElement(o,{ref:d},e.createElement(c.Provider,{value:{scroll:a,height:window.innerHeight}},m))},h={empty:()=>[{},{}],slideIn(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:"0",overflow:"hidden",width:"100%"},l={},i=2*t;return r.hold?l.height="context"+(r.hold+1):l.height="children3",n.transform=e<t?"translateX(-100%)":e>i?"translateX(0%)":r.right?`translateX(${100-(e-t)/(i-t)*100}%)`:`translateX(${(e-t)/(i-t)*100-100}%)`,n.right=r.right?"-50%":"50%",[l,n]},slideOut:(e,t,r)=>[{height:"slideOut"},{position:"slideOut"}],slideMe(e,t,r){void 0===r&&(r={});let n={position:"sticky",top:"0",overflow:"hidden",width:"100%"},l={};return r.hold&&(l.height="context"+(r.hold+1)),n.transform=e<t?"translateX(-100%)":e>100?"translateX(0%)":r.right?`translateX(${100-(e-t)/(100-t)*200}%)`:`translateX(${(e-t)/(100-t)*200-100}%)`,n.right=r.right?"-50%":"50%",[l,n]}},d={numChildren:1,scrollSpeed:1},a={empty:()=>[{},{},[]],transition(e,t,r){let n=100-t>t?100-t:t;if(void 0===r||!r.numChildren)return[{},{},[]];Object.keys(d).forEach((e=>{r.hasOwnProperty(e)||(r[e]=d[e])}));let[l,i,o]=((e,t,r,n,l)=>{let i=(100-t-(l?0:t))/n;return[i,e<t?-1:e>r&&!l?n+1:Math.floor((e-t)/i),e<t||e>r&&!l?0:(e-t)%i/i*100]})(e,t,n,r.numChildren,r.toEnd),c=new Array(r.numChildren).fill({}).map(((e,t)=>{let n={top:0,position:"absolute",opacity:"0",transition:`opacity ${r.transitionSpeed?r.transitionSpeed:1}s`};return t===i&&(n.opacity="1"),n}));return[{height:r.scrollViewPort?`context${r.scrollSpeed}`:`children${r.scrollSpeed}`,border:"1px yellow solid",position:"relative"},{position:"sticky",overflow:"visible",top:0,border:"1px red solid"},c]}},u=l=>{const i=t(null),o=t(null),[s,d]=r(0),[u,g]=r(0),p=e.useContext(c),[m,f]=r({}),[y,v]=r({}),[w,b]=r([]),E=e=>{if(!e)return"100%";let[t,r]=e.split(/(context|children)(\d)$/).filter(Boolean),n=(e=>{let t=0;if(e.current)for(let r=0;r<e.current.children.length;r++)t+=e.current.children.item(r).clientHeight;return t})(i);return"context"===t?p.height?p.height*parseInt(r)+"px":"100%":i.current?n*parseInt(r)+"px":"100%"};return n((()=>{if(o.current&&o.current&&p.scroll>=o.current.offsetTop-p.height&&p.scroll<=o.current.offsetTop+o.current.clientHeight){let e=p.scroll-(o.current.offsetTop-p.height);d(e/(o.current.clientHeight+p.height)*100),g(p.height<o.current.clientHeight?p.height/o.current.clientHeight*100:0)}}),[p.scroll,p.height]),n((()=>{let[e,t]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(h).includes(e))),r=h.empty();return t.length>0&&(r=t.map((t=>h[t](s,u,e[t]))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(l);e.height=e.height?E(e.height):"100%";let[r,n,i]=(e=>{let t=Object.keys(e).filter((e=>Object.keys(a).includes(e))),r=a.empty(),n=e.children&&Array.isArray(e.children)?e.children.length:1;return t.length>0&&(r=t.map((t=>a[t](s,u,Object.assign({numChildren:n},e[t])))),r=r.reduce(((e,t)=>[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]))),r})(l);r.height&&(r.height=E(r.height)),f(Object.assign(e,r)),v(Object.assign(t,n)),b(i)}),[s,u]),e.createElement("div",{ref:o,style:m},e.createElement("div",{ref:i,style:y},e.Children.map(l.children,((t,r)=>{let n=r<w.length?w[r]:{};return e.createElement("div",{style:n},void 0!==t?e.cloneElement(t):void 0)}))))};export{u as ConfigurableSlide,i as HelloWorld,s as Presentation};
//# sourceMappingURL=index.js.map
