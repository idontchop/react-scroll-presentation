{"version":3,"file":"index.js","sources":["../../../src/HelloWorld.tsx","../../src/components/Presentation.jsx","../../../src/lib/StyleConfig.ts","../../../src/lib/ChildrenConfig.ts","../../../src/ConfigurableSlide.tsx"],"sourcesContent":[null,"import React, {useState, useEffect, useRef} from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst PresentationDiv = styled.div`\r\n    contain: paint;\r\n  \r\n`\r\nexport const PresentationContext = React.createContext({scroll: 0, height: 0})\r\n\r\n/**\r\n * Options to program in:\r\n * \r\n * Different transitions in/out\r\n * Hold time\r\n * Pre-presentation selection presentation or static\r\n * contents\r\n * buttons to advance to next slide\r\n * body scroll or div scroll\r\n * Groupings with options (divs that will move together as they scroll up page)\r\n * \r\n * @param {*} props \r\n * @returns \r\n */\r\nconst Presentation = (props) => {\r\n\r\n    \r\n\r\n    const [scrollableHeight, setScrollableHeight] = useState(0)\r\n    const childrenRefs = useRef(new Array())\r\n    const presentationRef = useRef()\r\n    const scrollRef = useRef()\r\n    const [scrollTop, setScrollTop] = useState(0)\r\n    const [scrolling, setScrolling] = useState(false)\r\n    const [childClones, setChildClones] = useState([])\r\n    const [childStartMap, setChildStartMap] = useState([])  // Contains the start of scroll\r\n                                                            // for each child from main scroll\r\n\r\n    useEffect(() => {\r\n        const onScroll = e => {\r\n          //setScrollTop(scrollRef.current.scrollTop);\r\n          //setScrolling(scrollRef.current.scrollTop > scrollTop);\r\n          setScrollTop(window.scrollY)\r\n          setScrolling(window.scrollY > scrollTop)\r\n        };\r\n        //scrollRef.current.addEventListener(\"scroll\", onScroll);\r\n    \r\n        document.addEventListener(\"scroll\", onScroll)\r\n        //return () => scrollRef.current.removeEventListener(\"scroll\", onScroll);\r\n\r\n        return () => document.removeEventListener(\"scroll\",onScroll)\r\n      }, [scrollTop]);\r\n\r\n    useEffect( () => {\r\n\r\n        // build Child cloned array\r\n\r\n        if (Array.isArray(props.children) ) {\r\n            setChildClones (props.children.map ( (c,i) => {\r\n                return React.cloneElement(c, {scroll: scrollTop, ref: childrenRefs.current[i]})\r\n            }))\r\n        }\r\n\r\n    },[props])\r\n\r\n    useEffect ( () => {\r\n\r\n        \r\n\r\n        /*\r\n        Array.isArray(props.children) && props.children.map( (c,i) => {\r\n            console.log(c)\r\n            return React.cloneElement(c, {ref: (ref) => childrenRefs.current.push(ref) })\r\n\r\n            }\r\n        )\r\n\r\n        if(childrenRefs.length === props.children.length) {\r\n            let totalLength = childrenRefs.reduce ( (a,b) => a + b.current.clientHeight,0)\r\n            setScrollableHeight(totalLength)\r\n        }*/\r\n    },[childrenRefs])\r\n\r\n    useEffect( () => {\r\n\r\n        let startMap = []\r\n\r\n        /* Contribution requested:\r\n         * Hack applied to get the refs on the children after cloned. Putting them in cloneelement\r\n         * either didn't work, or unable to figure out how to properly fire a useeffect\r\n         * once they are are mounted. \r\n         * \r\n         * We should simply have to iterate over childrenRefs instead of pulling from children.\r\n         * Not sure if this will pose a problem later.\r\n         */\r\n        if (presentationRef.current?.children.length) {\r\n            let scrollHeight = 0\r\n            for (let i = 0; i < presentationRef.current.children.length; i++) {\r\n                let childHeight = presentationRef.current.children.item(i).clientHeight\r\n                scrollHeight += childHeight\r\n                startMap[i] = i===0 ? 0 : startMap[i-1] + childHeight\r\n            }\r\n            setScrollableHeight(scrollHeight)   // doesn't work because child heights can change\r\n            setChildStartMap(startMap)\r\n        }\r\n    }, [childClones])\r\n\r\n    return ( <PresentationDiv ref={presentationRef} scrollheight={scrollableHeight}>\r\n                <PresentationContext.Provider value={{\r\n                        scroll: scrollTop, \r\n                        height: window.innerHeight}}>\r\n                        {childClones}\r\n                </PresentationContext.Provider>\r\n            </PresentationDiv>\r\n\r\n    )\r\n}\r\n\r\nexport default Presentation",null,null,null],"names":["HW","props","bigHelloWorld","useRef","scrollPos","setScrollPos","useState","window","addEventListener","event","useEffect","current","scrollTop","React","style","height","display","flexDirection","justifyContent","createElement","title","ref","textAlign","fontSize","margin","children","PresentationDiv","styled","div","_templateObject","PresentationContext","createContext","scroll","Presentation","_useState2","_slicedToArray","scrollableHeight","setScrollableHeight","childrenRefs","Array","presentationRef","_useState4","setScrollTop","_useState6","setScrolling","_useState8","childClones","setChildClones","_useState10","setChildStartMap","onScroll","e","scrollY","document","removeEventListener","isArray","map","c","i","cloneElement","_presentationRef$curr","startMap","length","scrollHeight","childHeight","item","clientHeight","scrollheight","Provider","value","innerHeight","StyleConfig","empty","slideIn","y","yFullView","params","position","top","overflow","width","wrapperStyle","slideBy","hold","right","slideOut","slideMe","defaultParams","numChildren","scrollSpeed","ChildrenConfig","transition","yFullViewExit","Object","keys","forEach","key","hasOwnProperty","childScrollLength","activeChild","activeChildScroll","stretch","Math","floor","findScrolls","toEnd","childCSS","fill","css","opacity","transitionSpeed","scrollViewPort","border","ConfigurableSlide","wrapperRef","setY","setYFullView","context","useContext","setWrapperStyle","divStyle","setDivStyle","childrenStyles","setChildrenStyles","convertHeight","h","by","multiplier","split","filter","Boolean","childrenHeightSum","refWithChildren","heightSum","findChildrenHeightSum","parseInt","offsetTop","scrollDepth","wrapper","propKeys","includes","result","method","reduce","a","b","assign","buildStyles","childrenWrapper","childrenStyleDiv","childrenDivs","buildChildrenStyles","Children","childStyle","undefined"],"mappings":"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"}