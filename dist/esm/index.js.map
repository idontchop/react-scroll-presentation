{"version":3,"file":"index.js","sources":["../../../src/HelloWorld.tsx","../../src/components/Presentation.jsx"],"sourcesContent":[null,"import React, {useState, useEffect, useRef} from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst PresentationDiv = styled.div`\r\n    contain: paint;\r\n  \r\n`\r\nexport const PresentationContext = React.createContext({scroll: 0, height: 0})\r\n\r\n/**\r\n * Options to program in:\r\n * \r\n * Different transitions in/out\r\n * Hold time\r\n * Pre-presentation selection presentation or static\r\n * contents\r\n * buttons to advance to next slide\r\n * body scroll or div scroll\r\n * Groupings with options (divs that will move together as they scroll up page)\r\n * \r\n * @param {*} props \r\n * @returns \r\n */\r\nconst Presentation = (props) => {\r\n\r\n    \r\n\r\n    const [scrollableHeight, setScrollableHeight] = useState(0)\r\n    const childrenRefs = useRef(new Array())\r\n    const presentationRef = useRef()\r\n    const scrollRef = useRef()\r\n    const [scrollTop, setScrollTop] = useState(0)\r\n    const [scrolling, setScrolling] = useState(false)\r\n    const [childClones, setChildClones] = useState([])\r\n    const [childStartMap, setChildStartMap] = useState([])  // Contains the start of scroll\r\n                                                            // for each child from main scroll\r\n\r\n    useEffect(() => {\r\n        const onScroll = e => {\r\n          //setScrollTop(scrollRef.current.scrollTop);\r\n          //setScrolling(scrollRef.current.scrollTop > scrollTop);\r\n          setScrollTop(window.scrollY)\r\n          setScrolling(window.scrollY > scrollTop)\r\n        };\r\n        //scrollRef.current.addEventListener(\"scroll\", onScroll);\r\n    \r\n        document.addEventListener(\"scroll\", onScroll)\r\n        //return () => scrollRef.current.removeEventListener(\"scroll\", onScroll);\r\n\r\n        return () => document.removeEventListener(\"scroll\",onScroll)\r\n      }, [scrollTop]);\r\n\r\n    useEffect( () => {\r\n\r\n        // build Child cloned array\r\n\r\n        if (Array.isArray(props.children) ) {\r\n            setChildClones (props.children.map ( (c,i) => {\r\n                return React.cloneElement(c, {scroll: scrollTop, ref: childrenRefs.current[i]})\r\n            }))\r\n        }\r\n\r\n    },[props])\r\n\r\n    useEffect ( () => {\r\n\r\n        \r\n\r\n        /*\r\n        Array.isArray(props.children) && props.children.map( (c,i) => {\r\n            console.log(c)\r\n            return React.cloneElement(c, {ref: (ref) => childrenRefs.current.push(ref) })\r\n\r\n            }\r\n        )\r\n\r\n        if(childrenRefs.length === props.children.length) {\r\n            let totalLength = childrenRefs.reduce ( (a,b) => a + b.current.clientHeight,0)\r\n            setScrollableHeight(totalLength)\r\n        }*/\r\n    },[childrenRefs])\r\n\r\n    useEffect( () => {\r\n\r\n        let startMap = []\r\n\r\n        /* Contribution requested:\r\n         * Hack applied to get the refs on the children after cloned. Putting them in cloneelement\r\n         * either didn't work, or unable to figure out how to properly fire a useeffect\r\n         * once they are are mounted. \r\n         * \r\n         * We should simply have to iterate over childrenRefs instead of pulling from children.\r\n         * Not sure if this will pose a problem later.\r\n         */\r\n        if (presentationRef.current?.children.length) {\r\n            let scrollHeight = 0\r\n            for (let i = 0; i < presentationRef.current.children.length; i++) {\r\n                let childHeight = presentationRef.current.children.item(i).clientHeight\r\n                scrollHeight += childHeight\r\n                startMap[i] = i===0 ? 0 : startMap[i-1] + childHeight\r\n            }\r\n            setScrollableHeight(scrollHeight)   // doesn't work because child heights can change\r\n            setChildStartMap(startMap)\r\n        }\r\n    }, [childClones])\r\n\r\n    return ( <PresentationDiv ref={presentationRef} scrollheight={scrollableHeight}>\r\n                <PresentationContext.Provider value={{\r\n                        scroll: scrollTop, \r\n                        height: window.innerHeight}}>\r\n                        {childClones}\r\n                </PresentationContext.Provider>\r\n            </PresentationDiv>\r\n\r\n    )\r\n}\r\n\r\nexport default Presentation"],"names":["HW","props","bigHelloWorld","useRef","scrollPos","setScrollPos","useState","window","addEventListener","event","useEffect","current","scrollTop","React","style","height","display","flexDirection","justifyContent","createElement","title","ref","textAlign","fontSize","margin","children","PresentationDiv","styled","div","_templateObject","PresentationContext","createContext","scroll","Presentation","_useState2","_slicedToArray","scrollableHeight","setScrollableHeight","childrenRefs","Array","presentationRef","_useState4","setScrollTop","_useState6","setScrolling","_useState8","childClones","setChildClones","_useState10","setChildStartMap","onScroll","e","scrollY","document","removeEventListener","isArray","map","c","i","cloneElement","_presentationRef$curr","startMap","length","scrollHeight","childHeight","item","clientHeight","scrollheight","Provider","value","innerHeight"],"mappings":"gGAQA,MAAMA,EAAMC,IAER,MAAMC,EAAgBC,EAAuB,OAEtCC,EAAWC,GAAgBC,EAAS,GAW3C,OAVAC,OAAOC,iBAAiB,UAAWC,QAInCC,GAAW,KACHR,GAAiBA,EAAcS,SAC/BN,EAAaH,EAAcS,QAAQC,aAEzC,IAEKC,uBAAKC,MAAO,CAACC,OAAQ,QAASC,QAAS,OAAQC,cAAe,SAAUC,eAAgB,WAEvFL,EAAIM,cAAA,IAAA,KAAAlB,EAAMmB,OACVP,EAAAM,cAAA,IAAA,CAAGE,IAAKnB,EAAeY,MAAO,CAACQ,UAAW,SAAUC,SAAU,MAAOC,OAAQ,SACxEvB,EAAMwB,SAAWxB,EAAMwB,SAAW,sgCCxB7CC,EAAkBC,EAAOC,IAA/BC,MAAA,CAAA,iDAAAA,6EAIaC,EAAsBjB,EAAMkB,cAAc,CAACC,OAAQ,EAAGjB,OAAQ,IAgBrEkB,EAAe,SAAChC,GAI8BK,IAAhD4B,EAAAC,EAAgD7B,EAAS,GAAzD,GAAO8B,EAAPF,EAAA,GAAyBG,EAAzBH,EAAA,GACMI,EAAenC,EAAO,IAAIoC,OAC1BC,EAAkBrC,IACNA,IACgBG,IAAlCmC,EAAAN,EAAkC7B,EAAS,GAA3C,GAAOM,EAAP6B,EAAA,GAAkBC,EAAlBD,EAAA,GACAE,EAAAR,EAAkC7B,GAAS,GAA3C,GAAAqC,EAAA,GAAA,IAAkBC,EAAlBD,EAAA,GACAE,EAAAV,EAAsC7B,EAAS,IAA/C,GAAOwC,EAAPD,EAAA,GAAoBE,EAApBF,EAAA,GACAG,EAAAb,EAA0C7B,EAAS,IAAnD,GAAA0C,EAAA,GAAA,IAAsBC,OAwEtB,OArEAvC,GAAU,WACN,IAAMwC,EAAW,SAAAC,GAGfT,EAAanC,OAAO6C,SACpBR,EAAarC,OAAO6C,QAAUxC,IAOzB,OAHPyC,SAAS7C,iBAAiB,SAAU0C,GAG7B,WAAA,OAAMG,SAASC,oBAAoB,SAASJ,MAClD,CAACtC,IAENF,GAAW,WAIH6B,MAAMgB,QAAQtD,EAAMwB,WACpBsB,EAAgB9C,EAAMwB,SAAS+B,KAAM,SAACC,EAAEC,GACpC,OAAO7C,EAAM8C,aAAaF,EAAG,CAACzB,OAAQpB,EAAWS,IAAKiB,EAAa3B,QAAQ+C,WAIrF,CAACzD,IAEHS,GAAY,cAgBV,CAAC4B,IAEH5B,GAAW,WAAM,IAAAkD,EAETC,EAAW,GAUXrB,GAAJ,QAAIA,EAAAA,EAAgB7B,eAApB,IAAAiD,GAAIA,EAAyBnC,SAASqC,OAAQ,CAE1C,IADIC,IAAAA,EAAe,EACVL,EAAI,EAAGA,EAAIlB,EAAgB7B,QAAQc,SAASqC,OAAQJ,IAAK,CAC9D,IAAIM,EAAcxB,EAAgB7B,QAAQc,SAASwC,KAAKP,GAAGQ,aAC3DH,GAAgBC,EAChBH,EAASH,GAAS,IAAJA,EAAQ,EAAIG,EAASH,EAAE,GAAKM,EAE9C3B,EAAoB0B,GACpBd,EAAiBY,MAEtB,CAACf,IAEKjC,gBAACa,EAAD,CAAiBL,IAAKmB,EAAiB2B,aAAc/B,GAClDvB,EAAAM,cAACW,EAAoBsC,SAArB,CAA8BC,MAAO,CAC7BrC,OAAQpB,EACRG,OAAQR,OAAO+D,cACdxB"}